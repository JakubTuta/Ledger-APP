# ==================== Environment ====================
ENV=development
DEBUG=true
LOG_LEVEL=INFO

# ==================== Auth Database ====================
AUTH_DB_HOST=ledger-postgres
AUTH_DB_PORT=5432
AUTH_DB_NAME=auth_db
AUTH_DB_USER=postgres
AUTH_DB_PASSWORD=postgres

# Connection pooling
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# ==================== Analytics Workers ====================
# Cron schedules (cron format: minute hour day month day_of_week)
# Every 5 minutes: */5 * * * *
# Every 15 minutes: */15 * * * *
# Every hour: 0 * * * *

# Error rate aggregation (Redis cache)
ANALYTICS_ERROR_RATE_CRON=*/5 * * * *
ANALYTICS_ERROR_RATE_TTL=600

# Log volume aggregation (Redis cache)
ANALYTICS_LOG_VOLUME_CRON=*/5 * * * *
ANALYTICS_LOG_VOLUME_TTL=600

# Top errors computation
ANALYTICS_TOP_ERRORS_CRON=*/15 * * * *
ANALYTICS_TOP_ERRORS_TTL=900

# Usage stats generation
ANALYTICS_USAGE_STATS_CRON=*/5 * * * *
ANALYTICS_USAGE_STATS_TTL=3600

# Hourly metrics aggregation (PostgreSQL)
ANALYTICS_HOURLY_METRICS_CRON=0 * * * *

# Available routes update
ANALYTICS_AVAILABLE_ROUTES_CRON=0 * * * *

# Bottleneck metrics aggregation (Route performance tracking)
ANALYTICS_BOTTLENECK_METRICS_CRON=30 * * * *

# Job execution settings
ANALYTICS_JOB_MISFIRE_GRACE_TIME=60
ANALYTICS_QUERY_TIMEOUT=60

# ==================== Logs Database ====================
LOGS_DB_HOST=ledger-postgres-logs
LOGS_DB_PORT=5432
LOGS_DB_NAME=logs_db
LOGS_DB_USER=postgres
LOGS_DB_PASSWORD=postgres

# ==================== Redis ====================
REDIS_HOST=ledger-redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=password
REDIS_MAX_CONNECTIONS=50

# ==================== Auth Service ====================
AUTH_GRPC_PORT=50051
AUTH_SERVICE_HOST=ledger-auth-service
AUTH_SERVICE_PORT=50051

# ==================== Gateway Service ====================
GATEWAY_HTTP_PORT=8020
GATEWAY_HOST=0.0.0.0
GATEWAY_WORKERS=4

# gRPC Connection Pool
GRPC_POOL_SIZE=2
GRPC_KEEPALIVE_TIME_MS=30000
GRPC_KEEPALIVE_TIMEOUT_MS=5000
GRPC_TIMEOUT=5.0

# ==================== Ingestion Service ====================
INGESTION_GRPC_PORT=50052
INGESTION_SERVICE_HOST=ledger-ingestion
INGESTION_HOST=0.0.0.0

# Queue Configuration
QUEUE_MAX_DEPTH=100000
QUEUE_WORKER_TIMEOUT=30
QUEUE_BATCH_SIZE=1000
WORKER_COUNT=5

# Partition Management
PARTITION_MONTHS_AHEAD=6
ENABLE_PARTITION_SCHEDULER=true

# Partition scheduler cron schedules
PARTITION_CREATE_CRON=0 0 1 * *
PARTITION_CHECK_CRON=30 0 * * *
PARTITION_MISFIRE_GRACE_TIME=3600

# Validation Limits
MAX_LOG_MESSAGE_LENGTH=10000
MAX_ERROR_MESSAGE_LENGTH=5000
MAX_STACK_TRACE_LENGTH=50000
MAX_ATTRIBUTES_SIZE=100000
MAX_BATCH_LOGS=1000
MAX_REQUEST_SIZE_MB=5
TIMESTAMP_FUTURE_TOLERANCE_MINUTES=5

# ==================== Query Service ====================
QUERY_GRPC_PORT=50053
QUERY_SERVICE_HOST=ledger-query
QUERY_SERVICE_PORT=50053
QUERY_HOST=0.0.0.0

# ==================== Security ====================
JWT_SECRET=bd544fd650afff80a2f9e9768f5674c3047321b8d2d2bacac7f05fac93366b29
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
BCRYPT_ROUNDS=12

# API Keys - Lower cost for API keys (validated frequently)
API_KEY_BCRYPT_ROUNDS=10

# ==================== Rate Limiting ====================
DEFAULT_RATE_LIMIT_PER_MINUTE=1000
DEFAULT_RATE_LIMIT_PER_HOUR=20000
DEFAULT_DAILY_QUOTA=100000

# Rate limit windows (seconds)
RATE_LIMIT_WINDOW_MINUTE=60
RATE_LIMIT_WINDOW_HOUR=3600

# ==================== Caching ====================
# API key cache: 5 minutes
API_KEY_CACHE_TTL=300
# Emergency cache for circuit breaker: 10 minutes
EMERGENCY_CACHE_TTL=600
# Default cache TTL
CACHE_TTL_SECONDS=300

# ==================== Circuit Breaker ====================
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=30
CIRCUIT_BREAKER_HALF_OPEN_MAX_CALLS=3

# ==================== Timeouts ====================
REDIS_TIMEOUT=1.0
REQUEST_TIMEOUT=30.0

# ==================== Notifications ====================
NOTIFICATIONS_ENABLED=true
NOTIFICATIONS_MAX_CONNECTIONS_PER_USER=5
NOTIFICATIONS_HEARTBEAT_INTERVAL=30
NOTIFICATIONS_PUBLISH_ERRORS=true
NOTIFICATIONS_PUBLISH_CRITICAL=true
